<div class="upload-step-component">
  <div class="info-box-test">
    <pb-info-box (addFiles)="fileInput.click()"></pb-info-box>
  </div>
  <input type="file" #fileInput hidden accept="image/jpeg,image/jpg" [multiple]="true" (change)="addFiles($event)" />
  <div [dragula]="'draggable-photo-bag'" draggable="true" class="photo-drop-area d-flex flex-wrap align-content-start" ngClass="{{dragAreaClass}}">
    <div
      class="image-wrapper"
      [ngStyle]="{'backgroundImage': 'url(' + photoUrl(file?.url) + ')'}"
      [style.width.px]="file.width*200/file.height || 200"
      [style.height.px]="200"
      (click)="editFile(file, i)"
      *ngFor="let file of (magazine$ | async)?.files; let i = index">
      <pb-spinner *ngIf="file?.isLoading"></pb-spinner>
      <div class='m-btn-photo-actions-wrapper'>
        <span class="m-btn-photo-actions icon-warning" *ngIf="uploadStateService.isTooSmall(file) || uploadStateService.isWrongRatio(file)"></span>
        <span class='m-btn-photo-actions icon-delete pull-right' (click)="deleteFile(file, $event)"></span>
      </div>
      <div class="pb-mood-text" [innerHtml]="getMoodString(file?.mood)"></div>
    </div>
  </div>
  <pb-spinner *ngIf="uploadStateService.isLoading"></pb-spinner>
</div>
<pb-footer-bar
  (sortByDate)="uploadStateService.sortByDate()"
  (sortByName)="uploadStateService.sortByName()"
  (addFiles)="fileInput.click()"
  (deleteAllFiles)="deleteAll()"
  (nextStep)="nextStep()">
</pb-footer-bar>
