<div class="account-details-component container">
  <div>My account details</div>
  <div class="l-separator--line"></div>
  <form class="sign-in-form" name="accountDetailForm" [formGroup]="accountDetailForm" (ngSubmit)="saveProfile()" novalidate>
    <div class="row">
      <div class="col-md-4">
        <div class="d-flex align-items-center">
          <div class='icon-user'></div>
          <div class="form-group">
            <label l10nTranslate>FIRSTNAME</label>
            <input class="form-control" [placeholder]="'REGISTER_FORM_FIRSTNAME' | translate:lang" formControlName="firstName">
            <div class="form-field-error" *ngIf="accountDetailFormErrors.firstName.required" l10nTranslate>
              REGISTER_FORM_ERROR_REQUIRED_FIRSTNAME
            </div>
          </div>
        </div>

        <div class="d-flex align-items-center">
          <div class='empty-div'></div>
          <div class="form-group">
            <label l10nTranslate>LASTNAME</label>
            <input class="form-control" [placeholder]="'REGISTER_FORM_LASTNAME' | translate:lang" formControlName="lastName">
            <div class="form-field-error" *ngIf="accountDetailFormErrors.lastName.required" l10nTranslate>
              REGISTER_FORM_ERROR_REQUIRED_LASTNAME
            </div>
          </div>
        </div>

        <div class="d-flex align-items-center">
          <div class='icon-email'></div>
          <div class="form-group">
            <label>Email</label>
            <input class="form-control" [placeholder]="'REGISTER_FORM_EMAIL' | translate:lang" formControlName="email">
            <div class="form-field-error" *ngIf="accountDetailFormErrors.email.required" l10nTranslate>
              LOGIN_FORM_ERROR_REQUIRED_EMAIL
            </div>
            <div class="form-field-error" *ngIf="!accountDetailFormErrors.email.required && accountDetailFormErrors.email.email" l10nTranslate>
              LOGIN_FORM_ERROR_PATTERN_EMAIL
            </div>
          </div>
        </div>

        <div class="d-flex align-items-center">
          <div class='icon-password'></div>
          <div class="form-group">
            <label l10nTranslate>PASSWORD</label>
            <input class="form-control" type="password" [placeholder]="'REGISTER_FORM_MIN6' | translate:lang" formControlName="password">
            <div class="form-field-error" *ngIf="accountDetailFormErrors.password.required" l10nTranslate>
              LOGIN_FORM_ERROR_REQUIRED_PASSWORD
            </div>
          </div>
        </div>

        <div class="d-flex align-items-center">
          <div class='empty-div'></div>
          <div class="form-group">
            <label l10nTranslate>PASSWORD_REPEAT</label>
            <input class="form-control" type="password" [placeholder]="'REGISTER_FORM_REPEAT' | translate:lang" formControlName="passwordRepeat">
            <div class="form-field-error" *ngIf="accountDetailFormErrors.passwordRepeat.required" l10nTranslate>
              LOGIN_FORM_ERROR_REQUIRED_PASSWORD
            </div>
            <div class="form-field-error" *ngIf="accountDetailFormErrors.passwordRepeat.passwordsNotMatch" l10nTranslate>
              REGISTER_FORM_ERROR_PATTERN_CONFIRM_PASSWORD
            </div>
          </div>
        </div>
      </div>

      <div class="col-md-4">
        <div class="d-flex align-items-center">
          <div class="form-group">
            <label l10nTranslate>POSTAL_CODE</label>
            <input class="form-control" formControlName="postalCode" (ngModelChange)="doPostalCodeCheck()">
            <div class="form-field-error" *ngIf="accountDetailFormErrors.postalCode.required" l10nTranslate>
              REGISTER_FORM_ERROR_REQUIRED_ZIPCODE
            </div>
            <div class="form-field-error" *ngIf="!accountDetailFormErrors.postalCode.required && accountDetailFormErrors.postalCode.pattern" l10nTranslate>
              REGISTER_FORM_ERROR_PATTERN_ZIPCODE
            </div>   
          </div>
        </div>  

        <div class="d-flex align-items-center">
          <div class="form-group">
            <label l10nTranslate>HOUSE_NUMBER</label>
            <input class="form-control" formControlName="houseNumber" (ngModelChange)="doPostalCodeCheck()">
            <div class="form-field-error" *ngIf="accountDetailFormErrors.houseNumber.required" l10nTranslate>
              REGISTER_FORM_ERROR_REQUIRED_HOUSE_NUMBER
            </div>
            <div class="form-field-error" *ngIf="!accountDetailFormErrors.houseNumber.required && accountDetailFormErrors.houseNumber.pattern" l10nTranslate>
              REGISTER_FORM_ERROR_PATTERN_HOUSE_NUMBER
            </div> 
          </div>
        </div>

        <div class="d-flex align-items-center">
          <div class="form-group">
            <label l10nTranslate>HOUSE_NUMBER_PREFIX</label>
            <input class="form-control" placeholder="Optioneel" formControlName="houseNumberSuffix">
          </div>
        </div>

        <div class="d-flex align-items-center">
          <div class="form-group">
            <label l10nTranslate>STREET</label>
            <input class="form-control" formControlName="street">
            <div class="form-field-error" *ngIf="accountDetailFormErrors.street.required" l10nTranslate>
              REGISTER_FORM_ERROR_REQUIRED_STREET
            </div>
          </div>
        </div>

        <div class="d-flex align-items-center">
          <div class="form-group">
            <label l10nTranslate>CITY</label>
            <input class="form-control" formControlName="city">
            <div class="form-field-error" *ngIf="accountDetailFormErrors.city.required" l10nTranslate>
              REGISTER_FORM_ERROR_REQUIRED_CITY
            </div>
          </div>
        </div>
      </div>
      
      <div class="col-md-4">
        <div class="d-flex align-items-center">
          <div class='empty-div'></div>
          <div class="form-group">
            <label l10nTranslate>EDIT_DATE_OF_BIRTH</label>
            <mat-form-field>
              <input class="form-control" matInput [matDatepicker]="picker" formControlName="birthDate">
              <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
            <div class="form-field-error" *ngIf="accountDetailFormErrors.birthDate.required" l10nTranslate>
              REGISTER_FORM_ERROR_REQUIRED_DATEOFBIRTH
            </div>
          </div>
        </div>

        <div class="d-flex align-items-center">
          <div class='icon-telephone'></div>
          <div class="form-group">
            <label l10nTranslate>EDIT_PHONE</label>
            <input class="form-control" formControlName="phone" required minlength='10' maxlength='13'>
            <div class="form-field-error" *ngIf="accountDetailFormErrors.phone.required" l10nTranslate>
              REGISTER_FORM_ERROR_REQUIRED_PHONE
            </div>
          </div>
        </div>

        <div class="d-flex">
          <div class='icon-email'></div>
          <div *ngIf="userInfo" class="form-group">
            <div class="d-flex align-items-center mb-2">
              <span l10nTranslate>NEWSLETTER_SUBSCRIBE</span>
            </div>
            <div class="d-flex align-items-center">
              <label class="custom-radio-button">
                <input
                  type="radio"
                  value="1"
                  [checked]="userInfo.use_newsletter === 1"
                  formControlName="newsletter" />
                <span></span>
              </label>
              <span l10nTranslate>YES</span>
            </div>
            <div class="d-flex align-items-center">
              <label class="custom-radio-button">
                <input
                  type="radio"
                  value="0"
                  [checked]="userInfo.use_newsletter === 0"
                  formControlName="newsletter" />
                <span></span>
              </label>
              <span l10nTranslate>NO</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <button
      class="common-rounded-button btn pull-right"
      [disabled]="accountDetailForm.invalid">
      <span l10nTranslate>SAVE</span>
    </button>
    
    <pb-spinner *ngIf="isLoading"></pb-spinner>
  </form>
</div>